{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"infra-2tie-baser \uc2dc\uc791 Infra 2tier Architecture - base \ub97c Terraform\uc73c\ub85c \uad6c\ud604\ud55c \ud504\ub85c\uc81d\ud2b8\uc785\ub2c8\ub2e4. \ud504\ub85c\uc81d\ud2b8 \ube4c\ub4dc \ubc0f \uc2e4\ud589\uc740 \ub2e4\uc74c\uacfc \uac19\uc740 \uc21c\uc11c\ub85c \uc774\ub8e8\uc5b4\uc9d1\ub2c8\ub2e4. 1. IAM \uacc4\uc815 \uc0dd\uc131 \ubc0f AWS CLI \ub97c \ud1b5\ud55c \ub85c\uceec \ud658\uacbd \uad6c\uc131 1.1 aws iam account \uc0dd\uc131 (aws console) AWS \uad00\ub9ac \ucf58\uc194\uc5d0\uc11c \ud504\ub85c\uadf8\ub798\ubc0d \ubc29\uc2dd \ub85c\uadf8\uc778 \uacc4\uc815 \uc0dd\uc131 \ubc0f AdministratorRole \ubd80\uc5ec 1.2 awscli install cmd $ brew install awscli 1.3 AWS local \ud658\uacbd \uc124\uc815 cmd $ aws configure AWS Access Key ID [****************KCPQ]: AWS Secret Access Key [****************OSRk]: Default region name [ap-northeast-2]: Default output format [None]: 2. terraform \uc124\uce58 \ubc0f \uc801\uc6a9 2.1 terraform \uc124\uce58 cmd $ brew install terraform 2.2 terraform \ud504\ub85c\uc81d\ud2b8 \uad6c\uc131 (git clone) cmd $ cd ~ cmd $ mkdir workspace cmd $ cd workspace /* git clone */ cmd $ git clone https://github.com/pe-woongjin/infra-2tier-base.git cmd $ cd ~/workspace/infra-2tier 2.3 tf-repository \uc778\ud504\ub77c \uad6c\ucd95 cmd $ cd ~/workspace/infra-2tier-base/tf-repository /* terraform */ cmd $ terraform init cmd $ terraform plan cmd $ terraform apply \u203b tf-repository\uac00 \uc774\ubbf8 \uad6c\ud604\ub418\uc5b4 \uc788\uc744 \ub54c \uc624\ub958 2.4 modules \uc778\ud504\ub77c \uad6c\ucd95 cmd $ cd ~/workspace/infra-2tier-base/modules /* terraform */ cmd $ terraform init cmd $ terraform plan cmd $ terraform apply \u203b tf-repository\uac00 \uba3c\uc800 \uad6c\ud604\ub418\uc9c0 \uc54a\uc558\uc744 \ub54c \uc624\ub958","title":"Info"},{"location":"#infra-2tie-baser","text":"Infra 2tier Architecture - base \ub97c Terraform\uc73c\ub85c \uad6c\ud604\ud55c \ud504\ub85c\uc81d\ud2b8\uc785\ub2c8\ub2e4. \ud504\ub85c\uc81d\ud2b8 \ube4c\ub4dc \ubc0f \uc2e4\ud589\uc740 \ub2e4\uc74c\uacfc \uac19\uc740 \uc21c\uc11c\ub85c \uc774\ub8e8\uc5b4\uc9d1\ub2c8\ub2e4.","title":"infra-2tie-baser \uc2dc\uc791"},{"location":"#1-iam-aws-cli","text":"","title":"1. IAM \uacc4\uc815 \uc0dd\uc131 \ubc0f AWS CLI \ub97c \ud1b5\ud55c \ub85c\uceec \ud658\uacbd \uad6c\uc131"},{"location":"#11-aws-iam-account-aws-console","text":"AWS \uad00\ub9ac \ucf58\uc194\uc5d0\uc11c \ud504\ub85c\uadf8\ub798\ubc0d \ubc29\uc2dd \ub85c\uadf8\uc778 \uacc4\uc815 \uc0dd\uc131 \ubc0f AdministratorRole \ubd80\uc5ec","title":"1.1 aws iam account \uc0dd\uc131 (aws console)"},{"location":"#12-awscli-install","text":"cmd $ brew install awscli","title":"1.2 awscli install"},{"location":"#13-aws-local","text":"cmd $ aws configure AWS Access Key ID [****************KCPQ]: AWS Secret Access Key [****************OSRk]: Default region name [ap-northeast-2]: Default output format [None]:","title":"1.3 AWS local \ud658\uacbd \uc124\uc815"},{"location":"#2-terraform","text":"","title":"2. terraform \uc124\uce58 \ubc0f \uc801\uc6a9"},{"location":"#21-terraform","text":"cmd $ brew install terraform","title":"2.1 terraform \uc124\uce58"},{"location":"#22-terraform-git-clone","text":"cmd $ cd ~ cmd $ mkdir workspace cmd $ cd workspace /* git clone */ cmd $ git clone https://github.com/pe-woongjin/infra-2tier-base.git cmd $ cd ~/workspace/infra-2tier","title":"2.2 terraform \ud504\ub85c\uc81d\ud2b8 \uad6c\uc131 (git clone)"},{"location":"#23-tf-repository","text":"cmd $ cd ~/workspace/infra-2tier-base/tf-repository /* terraform */ cmd $ terraform init cmd $ terraform plan cmd $ terraform apply \u203b tf-repository\uac00 \uc774\ubbf8 \uad6c\ud604\ub418\uc5b4 \uc788\uc744 \ub54c \uc624\ub958","title":"2.3 tf-repository \uc778\ud504\ub77c \uad6c\ucd95"},{"location":"#24-modules","text":"cmd $ cd ~/workspace/infra-2tier-base/modules /* terraform */ cmd $ terraform init cmd $ terraform plan cmd $ terraform apply \u203b tf-repository\uac00 \uba3c\uc800 \uad6c\ud604\ub418\uc9c0 \uc54a\uc558\uc744 \ub54c \uc624\ub958","title":"2.4 modules \uc778\ud504\ub77c \uad6c\ucd95"},{"location":"architecture/","text":"infra-2tier-base Architecture Infra 2tier Architecture - base \uc758 \uc778\ud504\ub77c \uc544\ud0a4\ud14d\ucc98 \ub17c\ub9ac \ubaa8\ub378\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.","title":"Architecture"},{"location":"architecture/#infra-2tier-base-architecture","text":"Infra 2tier Architecture - base \uc758 \uc778\ud504\ub77c \uc544\ud0a4\ud14d\ucc98 \ub17c\ub9ac \ubaa8\ub378\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.","title":"infra-2tier-base Architecture"},{"location":"directory/","text":"infra-2tier-base Directory infra-2tier\uc758 \ub514\ub809\ud1a0\ub9ac \uad6c\uc870\uc785\ub2c8\ub2e4. 1. tf-repository S3 \uc800\uc7a5\uc18c\uc640 Lock \uad00\ub9ac\ub97c \uc704\ud55c DynamoDB \uac00 \uad6c\ud604\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. modules \ubcf4\ub2e4 \uba3c\uc800 \uad6c\ud604 \ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4. (S3, DynamoDB\uac00 \uba3c\uc800 \uad6c\ud604\ub418\uc5b4\uc57c, modules\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.) 2. modules infra-2tier\uc758 \ubca0\uc774\uc2a4 \ubaa8\ub4c8\uc778 elb , iam , vpc \uad6c\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. 3. site 3.1 docs infra-2tier-base \uba85\uc138 \ubc0f \uc544\ud0a4\ud14d\uccd0 \uc640 \uad00\ub828\ub41c \ubb38\uc11c\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. 3.2 mkdocs \ub9e4\ub274\uc5bc \uac00\uc774\ub4dc \ud3f4\ub354\uc785\ub2c8\ub2e4. mkdocs \ub9c8\ud06c\ub2e4\uc6b4 \ubc29\uc2dd\uc73c\ub85c \uae00\uc4f0\uae30\ub97c \ud558\uba70, mkdocs serve \ub77c\ub294 \uba85\ub839\uc5b4\ub97c \ud1b5\ud574\uc11c \uc2e4\uc2dc\uac04\uc73c\ub85c \ub9e4\ub274\uc5bc \ub0b4\uc5ed\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. ( mkdocs.org \ucc38\uace0)","title":"Directory"},{"location":"directory/#infra-2tier-base-directory","text":"infra-2tier\uc758 \ub514\ub809\ud1a0\ub9ac \uad6c\uc870\uc785\ub2c8\ub2e4.","title":"infra-2tier-base Directory"},{"location":"directory/#1-tf-repository","text":"S3 \uc800\uc7a5\uc18c\uc640 Lock \uad00\ub9ac\ub97c \uc704\ud55c DynamoDB \uac00 \uad6c\ud604\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. modules \ubcf4\ub2e4 \uba3c\uc800 \uad6c\ud604 \ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4. (S3, DynamoDB\uac00 \uba3c\uc800 \uad6c\ud604\ub418\uc5b4\uc57c, modules\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.)","title":"1. tf-repository"},{"location":"directory/#2-modules","text":"infra-2tier\uc758 \ubca0\uc774\uc2a4 \ubaa8\ub4c8\uc778 elb , iam , vpc \uad6c\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.","title":"2. modules"},{"location":"directory/#3-site","text":"","title":"3. site"},{"location":"directory/#31-docs","text":"infra-2tier-base \uba85\uc138 \ubc0f \uc544\ud0a4\ud14d\uccd0 \uc640 \uad00\ub828\ub41c \ubb38\uc11c\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.","title":"3.1 docs"},{"location":"directory/#32-mkdocs","text":"\ub9e4\ub274\uc5bc \uac00\uc774\ub4dc \ud3f4\ub354\uc785\ub2c8\ub2e4. mkdocs \ub9c8\ud06c\ub2e4\uc6b4 \ubc29\uc2dd\uc73c\ub85c \uae00\uc4f0\uae30\ub97c \ud558\uba70, mkdocs serve \ub77c\ub294 \uba85\ub839\uc5b4\ub97c \ud1b5\ud574\uc11c \uc2e4\uc2dc\uac04\uc73c\ub85c \ub9e4\ub274\uc5bc \ub0b4\uc5ed\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. ( mkdocs.org \ucc38\uace0)","title":"3.2 mkdocs"},{"location":"modules/","text":"infra-2tier-basemodules modules\ub294 vpc , elb , iam \ub85c \uad6c\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. 1. VPC vpc \uc640 \uad00\ub828 \ub9ac\uc18c\uc2a4 eip , internet-gateway , nat-gateway , route-table , subnet \ub4f1\uc73c\ub85c \uad6c\ud604\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. resource \"aws_vpc\" \"vpc\" { -- VPC \uc124\uc815 cidr_block = var.vpc_cidr_block -- CIDR Block ... } resource \"aws_internet_gateway\" \"igw\" { -- Internet gateway \uc124\uc815 vpc_id = aws_vpc.vpc.id -- \uad6c\ucd95\ud55c VPC id ... } resource \"aws_eip\" \"eip\" { -- Elastic ip \uc124\uc815 vpc = true -- VPC deponds_on = [ aws_internet_gateway.igw ] -- Internet gateway \ucc38\uc870 ... } resource \"aws_nat_gateway\" \"nat\" { -- NAT \uc124\uc815 allocation_id = aws_eip.eip.id -- eip depends_on = [ aws_internet_gateway.igw, aws_eip.eip ] -- Internet gateway, eip \ucc38\uc870 ... } 2. ELB Application Load Balancer \uc758 \uae30\ubcf8 \ud2c0\uc774 \uad6c\ud604\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. resource \"aws_alb\" \"alb\" { -- ALB \uc124\uc815 load_balancer_type = \"application\" -- ALB \ud0c0\uc785 subnets = var.pub_sn_ids -- subnet security_groups = [ aws_security_group.alb-sg.id ] -- security group ... } 3. IAM 3.1 EC2 EC2\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 role \uc744 \uc815\uc758\ud569\ub2c8\ub2e4. resource \"aws_iam_role\" \"codedeploy-ec2-role\" { name = \"codedeploy-ec2-role\" ... } 3.2 Code-Deploy Code-Deploy\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 role \uc744 \uc815\uc758\ud569\ub2c8\ub2e4. resource \"aws_iam_role\" \"codedeploy-role\" { name = \"codedeploy-role\" ... }","title":"modules"},{"location":"modules/#infra-2tier-basemodules","text":"modules\ub294 vpc , elb , iam \ub85c \uad6c\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.","title":"infra-2tier-basemodules"},{"location":"modules/#1-vpc","text":"vpc \uc640 \uad00\ub828 \ub9ac\uc18c\uc2a4 eip , internet-gateway , nat-gateway , route-table , subnet \ub4f1\uc73c\ub85c \uad6c\ud604\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. resource \"aws_vpc\" \"vpc\" { -- VPC \uc124\uc815 cidr_block = var.vpc_cidr_block -- CIDR Block ... } resource \"aws_internet_gateway\" \"igw\" { -- Internet gateway \uc124\uc815 vpc_id = aws_vpc.vpc.id -- \uad6c\ucd95\ud55c VPC id ... } resource \"aws_eip\" \"eip\" { -- Elastic ip \uc124\uc815 vpc = true -- VPC deponds_on = [ aws_internet_gateway.igw ] -- Internet gateway \ucc38\uc870 ... } resource \"aws_nat_gateway\" \"nat\" { -- NAT \uc124\uc815 allocation_id = aws_eip.eip.id -- eip depends_on = [ aws_internet_gateway.igw, aws_eip.eip ] -- Internet gateway, eip \ucc38\uc870 ... }","title":"1. VPC"},{"location":"modules/#2-elb","text":"Application Load Balancer \uc758 \uae30\ubcf8 \ud2c0\uc774 \uad6c\ud604\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. resource \"aws_alb\" \"alb\" { -- ALB \uc124\uc815 load_balancer_type = \"application\" -- ALB \ud0c0\uc785 subnets = var.pub_sn_ids -- subnet security_groups = [ aws_security_group.alb-sg.id ] -- security group ... }","title":"2. ELB"},{"location":"modules/#3-iam","text":"","title":"3. IAM"},{"location":"modules/#31-ec2","text":"EC2\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 role \uc744 \uc815\uc758\ud569\ub2c8\ub2e4. resource \"aws_iam_role\" \"codedeploy-ec2-role\" { name = \"codedeploy-ec2-role\" ... }","title":"3.1 EC2"},{"location":"modules/#32-code-deploy","text":"Code-Deploy\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 role \uc744 \uc815\uc758\ud569\ub2c8\ub2e4. resource \"aws_iam_role\" \"codedeploy-role\" { name = \"codedeploy-role\" ... }","title":"3.2 Code-Deploy"},{"location":"repository/","text":"infra-2tier-basetf-repository 1. S3 .tfstate \ud30c\uc77c \uc774\ub825\uc744 S3\ub97c \ud1b5\ud574 \uad00\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. resource \"aws_s3_bucket\" \"terraform-tfstates-mgmt\" { -- S3 \uc124\uc815 bucket = var.s3_mgmt -- bucket name acl = \"private\" -- ACL logging { } -- logging versioning { } -- versioning ... } 2. DynamoDB S3\uc5d0\uc11c .tfstate \ud30c\uc77c \uad00\ub9ac \uc2dc, Lock\uc744 \ud1b5\ud574 \uc548\uc804\ud558\uac8c \uad00\ub9ac\ud560 \uc218 \uc788\ub3c4\ub85d \uad6c\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. resource \"aws_dynamodb_table\" \"terraform-lock-table\" { -- DynamoDB \uc124\uc815 name = var.dynamodb_tbl -- DB name read_capacity = 5 -- \uc77d\uae30 \uc6a9\ub7c9 \uc720\ub2db write_capacity = 5 -- \uc4f0\uae30 \uc6a9\ub7c9 \uc720\ub2db ... }","title":"tf-repository"},{"location":"repository/#infra-2tier-basetf-repository","text":"","title":"infra-2tier-basetf-repository"},{"location":"repository/#1-s3","text":".tfstate \ud30c\uc77c \uc774\ub825\uc744 S3\ub97c \ud1b5\ud574 \uad00\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. resource \"aws_s3_bucket\" \"terraform-tfstates-mgmt\" { -- S3 \uc124\uc815 bucket = var.s3_mgmt -- bucket name acl = \"private\" -- ACL logging { } -- logging versioning { } -- versioning ... }","title":"1. S3"},{"location":"repository/#2-dynamodb","text":"S3\uc5d0\uc11c .tfstate \ud30c\uc77c \uad00\ub9ac \uc2dc, Lock\uc744 \ud1b5\ud574 \uc548\uc804\ud558\uac8c \uad00\ub9ac\ud560 \uc218 \uc788\ub3c4\ub85d \uad6c\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. resource \"aws_dynamodb_table\" \"terraform-lock-table\" { -- DynamoDB \uc124\uc815 name = var.dynamodb_tbl -- DB name read_capacity = 5 -- \uc77d\uae30 \uc6a9\ub7c9 \uc720\ub2db write_capacity = 5 -- \uc4f0\uae30 \uc6a9\ub7c9 \uc720\ub2db ... }","title":"2. DynamoDB"}]}